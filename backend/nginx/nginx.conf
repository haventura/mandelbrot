user nginx;
# can handle 1000 concurrent connections
events {
	worker_connections   1000;
}
# forwards http requests
http {
	upstream api {
		least_conn;
		server backend_api_1:5000;
		server backend_api_2:5000;
		server backend_api_3:5000;
		server backend_api_4:5000;
		server backend_api_5:5000;
		server backend_api_6:5000;
	}
	# http server
	server {
		# listens the requests coming on port 80
		listen 80;
		access_log  off;
		# / means all the requests have to be forwarded to api service
		location / {
			# resolves the IP of api using Docker internal DNS
			proxy_pass http://api;
		}
	}
}